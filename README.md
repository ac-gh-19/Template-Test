# Template-Test

A modern TypeScript template with ES Modules (ESM), Jest testing, and Prettier formatting. Built following 2026 best practices.

## Features

- **TypeScript**: Static typing for better code quality and developer experience
- **ES Modules (ESM)**: Modern JavaScript module system (not CommonJS)
- **Jest**: Testing framework with full ESM support
- **Prettier**: Code formatter for consistent code style
- **tsx**: Fast TypeScript execution for development

## Prerequisites

- Node.js (v18 or higher recommended for full ESM support)
- npm (comes with Node.js)

## Installation

Install all dependencies:

```bash
npm install
```

## Project Structure

```
.
├── src/
│   ├── index.ts       # Main source file
│   └── index.test.ts  # Test file
├── dist/              # Compiled JavaScript output (generated by build)
├── .prettierrc        # Prettier configuration
├── jest.config.js     # Jest configuration (ESM format)
├── tsconfig.json      # TypeScript configuration (ESM output)
└── package.json       # Project dependencies and scripts (type: "module")
```

## Available Scripts

### Development

- `npm run dev` - Run the TypeScript code directly using tsx (fast, no compilation needed)
- `npm run build` - Compile TypeScript to ESM JavaScript in the `dist/` directory
- `npm start` - Run the compiled JavaScript from `dist/`

### Testing

- `npm test` - Run all tests with Jest (ESM mode)
- `npm run test:watch` - Run tests in watch mode
- `npm run test:coverage` - Run tests with coverage report

### Code Formatting

- `npm run format` - Format all TypeScript files in `src/` with Prettier
- `npm run format:check` - Check if files are formatted correctly
- `npm run lint` - Check code formatting (same as format:check)

## Usage Example

The template includes a simple example with math functions. To run it:

```bash
# Run with TypeScript directly (recommended for development)
npm run dev

# Or build and run (for production)
npm run build
npm start
```

## Writing Tests

Tests are written using Jest and can be organized using any of these standard patterns:

1. **Co-located tests**: Place test files next to your source files with `.test.ts` or `.spec.ts` extension
   - Example: `src/index.test.ts` alongside `src/index.ts`

2. **`__tests__` folder in src**: Organize tests in a dedicated `__tests__` folder inside `src/`
   - Example: `src/__tests__/myFeature.test.ts`

3. **Root-level `__tests__` folder**: Place tests in a `__tests__` folder at the project root
   - Example: `__tests__/integration.test.ts`

All patterns are supported and tests will be discovered automatically.

**Important**: When using ESM, import statements must include the `.js` extension (even though the source files are `.ts`):

```typescript
// In src/index.test.ts (co-located)
import { add } from './index.js';

// In src/__tests__/feature.test.ts
import { add } from '../index.js';

// In __tests__/integration.test.ts (root level)
import { add } from '../src/index.js';

describe('add function', () => {
  it('should add two numbers correctly', () => {
    expect(add(2, 3)).toBe(5);
  });
});
```

Run tests with:

```bash
npm test
```

## Configuration Files

### TypeScript (tsconfig.json)

Configured for ESM output:
- Target: ES2022
- Module: NodeNext (Node.js ESM)
- Module Resolution: NodeNext
- Strict type checking enabled
- Source files in `src/`, output to `dist/`

### Jest (jest.config.js)

Configured for ESM with flexible test locations:
- TypeScript support via ts-jest with ESM preset
- Node.js test environment
- Test files: `*.test.ts` or `*.spec.ts` anywhere in the project
- Supports `__tests__` folders at any level (root or nested)
- Supports co-located tests alongside source files
- Coverage collection from `src/` directory only
- `extensionsToTreatAsEsm` for `.ts` files
- Module name mapper for `.js` imports

### Prettier (.prettierrc)

Configured for:
- Semicolons enabled
- Single quotes
- 2-space indentation
- 80 character line width

## ESM Notes

This template uses ES Modules (ESM), the modern JavaScript module standard. Key differences from CommonJS:

- Package.json has `"type": "module"`
- Import statements require `.js` extensions (TypeScript convention)
- Use `import/export` instead of `require/module.exports`
- To check if module is main: Use `import.meta.url` comparison with file path

## License

ISC
